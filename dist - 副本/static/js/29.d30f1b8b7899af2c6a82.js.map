{"version":3,"sources":["webpack:///static/js/29.d30f1b8b7899af2c6a82.js","webpack:///./src/components/oauth.vue?ec82","webpack:///oauth.vue","webpack:///./src/components/oauth.vue"],"names":["webpackJsonp","+hjL","module","exports","render","_vm","this","_h","$createElement","_self","_c","staticRenderFns","75oy","__webpack_exports__","__webpack_require__","Object","defineProperty","value","created","_this","self","code","window","location","search","split","forEach","indexOf","$api","wechatLogin","platform","then","res","accessToken","data","$token","refreshToken","expireTime","$storage","set","id","hxId","password","hxPwd","avatar","loginSuccess","err","methods","get","replace","host","k3By","Component"],"mappings":"AAAAA,cAAc,KAERC,OACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAgBC,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,cAChD,QAD0EH,EAAAI,MAAAC,IAAAH,GAC1E,QACCI,qBDSKC,OACA,SAAUV,EAAQW,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,IEXlEJ,EAAA,SFiBIK,QAAS,WEfb,GAAAC,GAAAb,KFkBYc,EEjBZd,KFkBYe,EEjBZ,EFkBQC,QAAOC,SAASC,OAAOC,MAAM,KAAKC,QAAQ,SAAUT,GAC5CA,EAAMU,QAAQ,SAAW,IACzBN,EAAOJ,EAAMQ,MAAM,KEjBnC,MFoBQnB,KAAKsB,KAAKC,aACNR,KEjBZA,EFkBYS,SEjBZ,IAFAC,KAAA,SAAAC,GFqBY,GAAIC,GAAcD,EAAIE,KEjBlCD,WFkBYb,GAAKe,OAAOC,aAAaH,EAAYA,YAAaA,EAAYG,aAAcH,EEjBxFI,YFkBYlB,EAAMmB,SAASC,IAAI,MAAQC,GAAIR,EAAIE,KAAKO,KAAMC,SAAUV,EAAIE,KEjBxES,QFkBYxB,EAAMmB,SAASC,IAAI,OAAQP,EEjBvCE,MFkBYf,EAAMmB,SAASC,IAAI,UAAWP,EAAIE,KAAKU,QEjBnD,iCFkBYzB,EEjBZ0B,gBFkBW,SAAUC,OAGjBC,SACIF,aAAc,WAENvC,KAAKgC,SAASU,IAAI,gBAAsD,UAApC1C,KAAKgC,SAASU,IAAI,gBACxC1C,KAAKgC,SAASU,IEhB5C,eFkBY1B,OAAOC,SAAS0B,QAAQ,UAAY3B,OAAOC,SAAS2B,KAAO,gBAQjEC,KACA,SAAUjD,EAAQC,EAASW,GG3DjC,GAAAsC,GAAAtC,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAEA,KAGAZ,GAAAC,QAAAiD,EAAAjD","file":"static/js/29.d30f1b8b7899af2c6a82.js","sourcesContent":["webpackJsonp([29],{\n\n/***/ \"+hjL\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c(\"div\")\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"75oy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    created: function created() {\n        var _this = this;\n\n        var self = this;\n        var code = '';\n        window.location.search.split('&').forEach(function (value) {\n            if (value.indexOf('code') >= 0) {\n                code = value.split('=')[1];\n            }\n        });\n        this.$api.wechatLogin({\n            code: code,\n            platform: 5\n        }).then(function (res) {\n            var accessToken = res.data.accessToken;\n            self.$token.refreshToken(accessToken.accessToken, accessToken.refreshToken, accessToken.expireTime);\n            _this.$storage.set('hx', { id: res.data.hxId, password: res.data.hxPwd });\n            _this.$storage.set('user', res.data);\n            _this.$storage.set('headUrl', res.data.avatar || '../../static/image/avatar.png');\n            _this.loginSuccess();\n        }, function (err) {});\n    },\n\n    methods: {\n        loginSuccess: function loginSuccess() {\n            var redirectURI = '/index';\n            if (this.$storage.get('history_url') && this.$storage.get('history_url') != '/login') {\n                redirectURI = this.$storage.get('history_url');\n            }\n            window.location.replace('http://' + window.location.host + '/#/index');\n            //          this.$router.replace(redirectURI)\n        }\n    }\n});\n\n/***/ }),\n\n/***/ \"k3By\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"75oy\"),\n  /* template */\n  __webpack_require__(\"+hjL\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/29.d30f1b8b7899af2c6a82.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c(\"div\")\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-069fe66d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/oauth.vue\n// module id = +hjL\n// module chunks = 29","<template>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    created() {\r\n    \tconst self = this\r\n        let code = ''\r\n        window.location.search.split('&').forEach(value => {\r\n            if (value.indexOf('code') >= 0) {\r\n                code = value.split('=')[1]\r\n            }\r\n        })\r\n        this.$api.wechatLogin({\r\n\t\t\tcode: code,\r\n\t\t\tplatform: 5\r\n\t\t}).then(res => {\r\n\t\t\tlet accessToken = res.data.accessToken\r\n            self.$token.refreshToken(accessToken.accessToken, accessToken.refreshToken, accessToken.expireTime)\r\n            this.$storage.set('hx', {id: res.data.hxId, password: res.data.hxPwd})\r\n            this.$storage.set('user', res.data)\r\n            this.$storage.set('headUrl', res.data.avatar || '../../static/image/avatar.png')\r\n\t\t\tthis.loginSuccess()\r\n\t    }, err => {\r\n\t    \t\r\n\t    })\r\n    },\r\n    methods: {\r\n    \tloginSuccess() {\r\n\t\t\tlet redirectURI = '/index'\r\n            if (this.$storage.get('history_url') && this.$storage.get('history_url') != '/login') {\r\n                redirectURI = this.$storage.get('history_url')\r\n            }\r\n            window.location.replace('http://' + window.location.host + '/#/index')\r\n//          this.$router.replace(redirectURI)\r\n\t\t}\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// oauth.vue?475b31ba","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./oauth.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-069fe66d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./oauth.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/oauth.vue\n// module id = k3By\n// module chunks = 29"],"sourceRoot":""}